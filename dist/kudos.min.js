!function(a){var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=function(){function b(b,d){var e=this;this.element=b,this.dataStore=d.dataStore,this.start=c(this.start,this),this.stop=c(this.stop,this),this.complete=c(this.complete,this),this.undo=c(this.undo,this),a(document).on("touchstart",this.element,this.start),a(document).on("touchend",this.element,this.stop),this.element.mouseenter(this.start),this.element.mouseleave(this.stop),this.element.click(this.undo),this.render(),this.$counter=this.element.find(".count .num"),this.dataStore.hasVoted().then(function(a){a&&e.element.addClass("complete")}),this.dataStore.onKudoUpdates(function(a){e.setCount(a)})}document.location.pathname;return b.prototype.render=function(){var b=a('<a class="kudobject"><div class="opening"><div class="circle">&nbsp;</div></div></a><a href="#kudo" class="count"><span class="num">0</span><span class="txt">Kudos</span></a>');this.element.append(b)},b.prototype.start=function(){this.isKudoed()||(this.element.addClass("active"),this.activationTimer=setTimeout(this.complete,700))},b.prototype.stop=function(){clearTimeout(this.activationTimer),this.element.removeClass("active")},b.prototype.complete=function(){this.stop(),this.dataStore.addKudo(),this.element.addClass("complete")},b.prototype.undo=function(){this.isKudoed()&&(this.dataStore.removeKudo(),this.element.removeClass("complete"))},b.prototype.currentCount=function(){var a=parseInt(this.$counter.html(),10);return isNaN(a)&&(a=0),a},b.prototype.isKudoed=function(){return this.element.hasClass("complete")},b.prototype.setCount=function(a){this.$counter.html(a)},b}(),a(function(){a.fn.kudoable=function(c){return this.each(function(){return new b(a(this),c)})}})}(jQuery);