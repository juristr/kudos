!function(a){var b=new Firebase("https://firekudos.firebaseio.com/"),c=b.child("kudos"),d=document.location.pathname.replace(/[\/-]/g,""),e=function(){var a=$.Deferred(),c=b.getAuth();return null==c?b.authAnonymously(function(b,c){a.resolve(c)}):a.resolve(c),a.promise()};""===d&&(d="localhost");var f=function(){var a=$.Deferred();return e().then(function(b){c.child(d).child("likes").child(b.uid).once("value",function(b){a.resolve(null!==b.val())})}),a.promise()},g=function(){e().then(function(a){c.child(d).child("likes").child(a.uid).set({count:1})})},h=function(){e().then(function(a){c.child(d).child("likes").child(a.uid).remove()})},i=function(a){c.child(d).on("value",function(b){if(b){var c=b.val(),d=0;if(c)for(var e in c.likes)d++;a(d)}})},j={hasVoted:f,addKudo:g,removeKudo:h,onKudoUpdates:i};a.firebaseStorage=j}(window);